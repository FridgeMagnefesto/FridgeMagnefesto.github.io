<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fridge Magnefesto</title>
</head>
<body>
    <style type="text/css">
        body {
            background-image: url(https://testdrive-archive.azurewebsites.net/graphics/magneticpoetry/fridge.png);
            background-size: cover;
        }

        .magnet {
            background: white;
            width: fit-content;
            height: fit-content;
            padding: .1em .8em;
            position: absolute;
            cursor: move;
            box-shadow: 2px 2px 0 darkslategray;
        }

        p {
            margin: 0;
            font-size: larger;
        }
    </style>

    <template id="magnetTemplate">
        <div class="magnet"><p></p></div>
    </template>

    <script>
        const words = ['1', '2', '3', '4', '5', '6', '7', '8', '9', 'consider', 'changes', 'mood', 'make', 'making', 'feel', 'everything', 'excessively', 'flowers', 'rejects', 'help', 'anyone', 'rebel', 'enthusiasm', 'failure', 'sounds', 'horizontal', 'that', 'for', 'like', 'when', 'colours', 'do', 'this', 'that', 'I', 'want', 'tired', 'without', 'technique', 'be', 'passionate', 'only', 'making', 'is', 'are', 'do', 'to', 'too', 'everyone’s', 'a', 'the', 'process', 'connect', 'issues', 'sees', 'new', 'art', 'isn’t', 'not', 'with', 'obtained', 'human', 'skills', 'directly', 'failure', 'need', 'we', 'colour', 'artist', 'that', 'than', 'of', 'people', 'fun', 'community', 'play', 'mud'];
        words.forEach(createMagnet);

        var magnets = document.getElementsByClassName("magnet");
        for (var i = 0; i < magnets.length; i++) {
            randomPos(magnets.item(i));
            dragElement(magnets.item(i));
        }

        function createMagnet(word) {
            var magnetTemplate = document.querySelector('#magnetTemplate');
            var newMagnet = magnetTemplate.content.cloneNode(true);
            var text = newMagnet.querySelector("p");
            text.textContent = word;
            document.body.appendChild(newMagnet);
        }

        function randomPos(element) {
            var windowWidth = window.innerWidth;
            var windowHeight = window.innerHeight;
            element.style.top = getRandomInt(windowHeight - element.scrollHeight) + "px";
            element.style.left = getRandomInt(windowWidth - element.scrollWidth) + "px";
        }

        function getRandomInt(max) {
            return Math.floor(Math.random() * Math.floor(max));
        }

        function dragElement(element) {
            var newPosX = 0, newPosY = 0, oldPosX = 0, oldPosY = 0;
            element.onmousedown = dragMouseDown;

            function dragMouseDown(e) {
                e = e || window.event;
                e.preventDefault();
                // get the mouse cursor position at startup:
                oldPosX = e.clientX;
                oldPosY = e.clientY;
                document.onmouseup = closeDragElement;
                // call a function whenever the cursor moves:
                document.onmousemove = elementDrag;
            }

            function elementDrag(e) {
                e = e || window.event;
                e.preventDefault();
                // calculate the new cursor position:
                newPosX = oldPosX - e.clientX;
                newPosY = oldPosY - e.clientY;
                oldPosX = e.clientX;
                oldPosY = e.clientY;
                // set the element's new position:
                element.style.top = (element.offsetTop - newPosY) + "px";
                element.style.left = (element.offsetLeft - newPosX) + "px";
            }

            function closeDragElement() {
                // stop moving when mouse button is released:
                document.onmouseup = null;
                document.onmousemove = null;
            }
        }
    </script>
</body>
</html>